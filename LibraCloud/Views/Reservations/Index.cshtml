@model IEnumerable<LibraCloud.Models.Reservation>

@{
    ViewData["Title"] = "Your Reservations";
}

<section class="container my-5">
    <div class="glass-card light-card p-4">
        <h1 class="fw-bold text-blue mb-4">Reservations</h1>

        <table class="table table-hover table-bordered bg-white">
            <thead class="table-light">
                <tr>
                    <th>📖 Book Title</th>
                    <th>📅 Reservation Date</th>
                    <th>🔖 Status</th>
                    @if (User.IsInRole("Admin"))
                    {
                        <th>👤 User Email</th>
                    }
                </tr>
            </thead>
            <tbody>
                @foreach (var reservation in Model)
                {
                    <tr>
                        <td>@reservation.Book?.Title</td>
                        <td>@reservation.ReservationDate.ToString("yyyy-MM-dd HH:mm")</td>
                        <td>
                            @if (reservation.Status == "Canceled")
                            {
                                <span class="badge bg-danger">Canceled</span>
                            }
                            else if (reservation.Status == "Reserved")
                            {
                                <span class="badge bg-success">Reserved</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">@reservation.Status</span>
                            }
                        </td>
                        @if (User.IsInRole("Admin"))
                        {
                            <td>@reservation.User?.Email</td>
                        }
                    </tr>
                }
            </tbody>
        </table>

        @if (!Model.Any())
        {
            <div class="alert alert-info mt-3">No reservations found.</div>
        }
    </div>
</section>
